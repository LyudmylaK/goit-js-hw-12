{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nconst simplelightboxExempl = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionPosition: 'buttom',\n  captionDelay: 250,\n  overlayOpacity: 0.7,\n});\n\nexport function createMarkup(arr) {\n  const markupGallery = arr\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `\n      <li class=\"gallery-item\">\n\t<a class=\"gallery-link\" href=\"${largeImageURL}\">\n\t\t<img\n\t\t\tclass=\"gallery-image\"\n\t\t\tsrc=\"${webformatURL}\"\n\t\t\talt=\"${tags}\"\n\t\t\t/>\n\t</a>\n    <ul class=\"gallery-image-descr\">\n    <li>\n    <p class=\"image-descr-text\">Likes</p>\n    <p class=\"image-descr-number\">${likes}</p>\n    </li>\n    <li>\n    <p class=\"image-descr-text\">Views</p>\n    <p class=\"image-descr-number\">${views}</p>\n    </li>\n    <li>\n    <p class=\"image-descr-text\">Comments</p>\n    <p class=\"image-descr-number\">${comments}</p>\n    </li>\n    <li>\n    <p class=\"image-descr-text\">Downloads</p>\n    <p class=\"image-descr-number\">${downloads}</p>\n    </li>\n    </ul>\n</li>\n      `;\n      }\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markupGallery);\n  simplelightboxExempl.refresh();\n}\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '46912435-f669d0ff50839d2359d53ff0c';\n\nconst loader = document.querySelector('.loader');\n\nconst perPage = 15;\n\nexport async function serviseImage(query, page = 1) {\n  loader.style.display = 'block';\n  const { data } = await axios(`${BASE_URL}`, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      leng: 'en',\n      page,\n      per_page: perPage,\n    },\n  }).finally(() => {\n    loader.style.display = 'none';\n  });\n\n  return data;\n}\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { createMarkup } from './js/render-functions';\nimport { serviseImage } from './js/pixabay-api';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst endLoaderText = document.querySelector('.end-loader');\nconst btnLoadMore = document.querySelector('.btn-load-more');\n\nlet page = 1;\nconst perPage = 15;\nlet queryValue = '';\n\nloader.style.display = 'none';\nendLoaderText.style.display = 'none';\nbtnLoadMore.style.display = 'none';\n\nform.addEventListener('submit', onFormBtnClick);\nbtnLoadMore.addEventListener('click', onBtnLoadMoreClick);\n\nasync function onFormBtnClick(event) {\n  event.preventDefault();\n  page = 1;\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n  btnLoadMore.style.display = 'block';\n  // endLoaderText.style.display = 'none';\n\n  queryValue = event.target.elements.query.value;\n  // console.log(queryValue);\n\n  if (!queryValue.trim() === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Please enter the name of the image in the search field!',\n    });\n    return;\n  }\n  try {\n    const data = await serviseImage(queryValue, page);\n    console.log(data);\n    if (!data.hits.length) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      createMarkup(data.hits);\n    }\n\n    if (data.totalHits > page * perPage) {\n      btnLoadMore.style.display = 'block';\n    } else {\n      btnLoadMore.style.display = 'none';\n      iziToast.show({\n        class: 'toast',\n        position: 'topRight',\n        messageColor: 'white',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loader.style.display = 'none';\n  }\n\n  form.reset();\n}\n\nasync function onBtnLoadMoreClick() {\n  page += 1;\n  loader.style.display = 'block';\n  // btnLoadMore.style.display = 'none';\n  // endLoaderText.style.display = 'none';\n  try {\n    const data = await serviseImage(queryValue, page);\n    createMarkup(data.hits);\n\n    if (data.totalHits > page * perPage) {\n      btnLoadMore.style.display = 'block';\n    } else {\n      btnLoadMore.style.display = 'none';\n      endLoaderText.style.display = 'block';\n    }\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    loader.style.display = 'none';\n  }\n}\n"],"names":["gallery","simplelightboxExempl","SimpleLightbox","createMarkup","arr","markupGallery","webformatURL","largeImageURL","tags","likes","views","comments","downloads","BASE_URL","API_KEY","loader","perPage","serviseImage","query","page","data","axios","form","endLoaderText","btnLoadMore","queryValue","onFormBtnClick","onBtnLoadMoreClick","event","iziToast","error"],"mappings":"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"}